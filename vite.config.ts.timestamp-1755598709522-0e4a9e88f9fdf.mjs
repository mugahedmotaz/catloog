// vite.config.ts
import { defineConfig, loadEnv } from "file:///C:/Users/AKAM/OneDrive/Desktop/Catloog/node_modules/vite/dist/node/index.js";
import dotenv from "dotenv";
import react from "file:///C:/Users/AKAM/OneDrive/Desktop/Catloog/node_modules/@vitejs/plugin-react/dist/index.mjs";

// api/connect-domain.ts
var ALLOWED_ORIGINS = /* @__PURE__ */ new Set([
  "http://localhost:5173",
  "http://127.0.0.1:5173",
  "http://localhost:4173",
  // vite preview
  "http://127.0.0.1:4173",
  "https://catloog.vercel.app",
  "https://www.catloog.vercel.app"
]);
function withCors(resp, origin) {
  const headers = new Headers(resp.headers);
  if (origin && ALLOWED_ORIGINS.has(origin)) {
    headers.set("Access-Control-Allow-Origin", origin);
    headers.set("Vary", "Origin");
  }
  headers.set("Access-Control-Allow-Methods", "POST, GET, OPTIONS");
  headers.set("Access-Control-Allow-Headers", "Content-Type, Authorization");
  headers.set("Access-Control-Max-Age", "86400");
  return new Response(resp.body, { status: resp.status, headers });
}
function corsJson(origin, obj, status = 200) {
  const resp = new Response(JSON.stringify(obj), {
    status,
    headers: { "Content-Type": "application/json" }
  });
  return withCors(resp, origin || void 0);
}
async function handler(req) {
  const url = new URL(req.url);
  const origin = req.headers.get("origin");
  if (req.method === "OPTIONS") {
    return withCors(new Response(null, { status: 204 }), origin || void 0);
  }
  if (req.method === "GET" && url.searchParams.get("debug") === "1") {
    const storesProjectId = process?.env?.VERCEL_STORES_PROJECT_ID;
    const projectId2 = process?.env?.VERCEL_PROJECT_ID;
    const token2 = process?.env?.VERCEL_TOKEN;
    const teamId2 = process?.env?.VERCEL_TEAM_ID;
    return corsJson(origin, {
      ok: true,
      env: {
        VERCEL_STORES_PROJECT_ID: Boolean(storesProjectId),
        VERCEL_PROJECT_ID: Boolean(projectId2),
        VERCEL_TOKEN: Boolean(token2),
        VERCEL_TEAM_ID: Boolean(teamId2)
      },
      runtime: "edge"
    });
  }
  if (req.method === "GET" && url.searchParams.get("status") === "1") {
    const domain2 = url.searchParams.get("domain");
    const projectId2 = process?.env?.VERCEL_STORES_PROJECT_ID || process?.env?.VERCEL_PROJECT_ID;
    const token2 = process?.env?.VERCEL_TOKEN;
    const teamId2 = process?.env?.VERCEL_TEAM_ID;
    if (!projectId2 || !token2) return corsJson(origin, { error: "Missing Vercel credentials on server" }, 500);
    if (!domain2) return corsJson(origin, { error: "Missing domain" }, 400);
    try {
      const statusUrl = new URL(`https://api.vercel.com/v6/domains/${encodeURIComponent(domain2)}`);
      if (teamId2) statusUrl.searchParams.set("teamId", teamId2);
      const statusResp = await fetch(statusUrl.toString(), {
        headers: { Authorization: `Bearer ${token2}` }
      });
      const text = await statusResp.text();
      const data = text ? JSON.parse(text) : null;
      if (!statusResp.ok) {
        return corsJson(origin, { error: data?.error?.message || data || "Failed to fetch domain status" }, statusResp.status);
      }
      return corsJson(origin, { ok: true, domain: domain2, ...data });
    } catch (e) {
      return corsJson(origin, { error: e?.message || "Unexpected error" }, 500);
    }
  }
  if (req.method !== "POST" && req.method !== "DELETE") {
    return corsJson(origin, { error: "Method Not Allowed" }, 405);
  }
  let body = null;
  try {
    body = await req.json();
  } catch (e) {
    return corsJson(origin, { error: "Invalid JSON body" }, 400);
  }
  const domain = body?.domain;
  if (!domain || typeof domain !== "string") {
    return corsJson(origin, { error: "Missing domain" }, 400);
  }
  const domainRegex = /^(?:[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[A-Za-z]{2,}$/;
  const projectId = process?.env?.VERCEL_STORES_PROJECT_ID || process?.env?.VERCEL_PROJECT_ID;
  const token = process?.env?.VERCEL_TOKEN;
  const teamId = process?.env?.VERCEL_TEAM_ID;
  if (!projectId || !token) {
    return corsJson(origin, { error: "Missing Vercel credentials on server" }, 500);
  }
  if (req.method === "DELETE") {
    try {
      const delUrl = new URL(`https://api.vercel.com/v9/projects/${encodeURIComponent(projectId)}/domains/${encodeURIComponent(String(domain))}`);
      if (teamId) delUrl.searchParams.set("teamId", teamId);
      const delResp = await fetch(delUrl.toString(), {
        method: "DELETE",
        headers: { Authorization: `Bearer ${token}` }
      });
      const text = await delResp.text();
      let data = null;
      try {
        data = text ? JSON.parse(text) : null;
      } catch {
      }
      if (!delResp.ok) {
        return corsJson(origin, { error: data?.error?.message || data || "Failed to remove domain" }, delResp.status);
      }
      return corsJson(origin, { success: true, removed: true, domain: String(domain) });
    } catch (e) {
      return corsJson(origin, { error: e?.message || "Unexpected error" }, 500);
    }
  }
  const normalized = String(domain).trim().toLowerCase().replace(/^https?:\/\//, "").replace(/\/$/, "");
  if (!domainRegex.test(normalized)) {
    return corsJson(origin, { error: "Invalid domain format" }, 400);
  }
  const isApex = normalized.split(".").length === 2;
  try {
    const addUrl = new URL(`https://api.vercel.com/v10/projects/${encodeURIComponent(projectId)}/domains`);
    if (teamId) addUrl.searchParams.set("teamId", teamId);
    const addResp = await fetch(addUrl.toString(), {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        Authorization: `Bearer ${token}`
      },
      body: JSON.stringify({ name: normalized })
    });
    let addData = null;
    try {
      const text = await addResp.text();
      addData = text ? JSON.parse(text) : null;
    } catch {
    }
    if (!addResp.ok) {
      const code = addData?.error?.code || addData?.code;
      if (!(code && String(code).includes("domain_already"))) {
        if (code === "domain_conflict" || code === "domain_already_in_use") {
          return corsJson(origin, { error: "Domain is already in use by another project or team on Vercel. Remove it there first or transfer ownership." }, 409);
        }
        if (addResp.status === 401 || addResp.status === 403) {
          return corsJson(origin, { error: "Unauthorized: Check VERCEL_TOKEN and VERCEL_TEAM_ID (if using a Team)." }, addResp.status);
        }
        if (addResp.status === 404) {
          return corsJson(origin, { error: "Project not found: Verify VERCEL_PROJECT_ID belongs to this project/account/team." }, 404);
        }
        return corsJson(origin, { error: addData?.error?.message || addData || "Failed to add domain" }, addResp.status);
      }
    }
    try {
      const verifyUrl = new URL(`https://api.vercel.com/v6/domains/${encodeURIComponent(normalized)}/verify`);
      if (teamId) verifyUrl.searchParams.set("teamId", teamId);
      await fetch(verifyUrl.toString(), {
        method: "POST",
        headers: { Authorization: `Bearer ${token}` }
      });
    } catch {
    }
    const statusUrl = new URL(`https://api.vercel.com/v6/domains/${encodeURIComponent(normalized)}`);
    if (teamId) statusUrl.searchParams.set("teamId", teamId);
    const statusResp = await fetch(statusUrl.toString(), {
      headers: { Authorization: `Bearer ${token}` }
    });
    let statusData = null;
    try {
      const text = await statusResp.text();
      statusData = text ? JSON.parse(text) : null;
    } catch {
    }
    if (!statusResp.ok) {
      return corsJson(origin, { error: statusData?.error?.message || statusData || "Failed to fetch domain status" }, statusResp.status);
    }
    const verified = Boolean(statusData?.verified);
    const txtRecords = statusData?.verification || [];
    return corsJson(origin, {
      success: true,
      domain: normalized,
      verified,
      needsDNS: !verified,
      instructions: verified ? "Domain is verified and active." : isApex ? "Create an A record pointing to 76.76.21.21. For www, add CNAME to cname.vercel-dns.com, then retry." : "Create a CNAME pointing to cname.vercel-dns.com for this subdomain, then retry.",
      verification: txtRecords
    });
  } catch (e) {
    return corsJson(origin, { error: e?.message || "Unexpected error" }, 500);
  }
}

// vite.config.ts
dotenv.config();
var vite_config_default = defineConfig(({ mode }) => {
  const env = loadEnv(mode, process.cwd(), "");
  const apiTarget = env.VITE_DEV_API_PROXY || env.VITE_API_BASE;
  const localApiPlugin = {
    name: "local-api-connect-domain",
    configureServer(server) {
      server.middlewares.use("/api/connect-domain", async (req, res) => {
        try {
          const chunks = [];
          await new Promise((resolve) => {
            req.on("data", (c) => chunks.push(c));
            req.on("end", () => resolve());
          });
          const body = Buffer.concat(chunks);
          const origin = `http://localhost:${server.config.server.port || 5173}`;
          const url = origin + (req.url || "/api/connect-domain");
          const method = (req.method || "GET").toUpperCase();
          const request = new Request(url, {
            method,
            headers: req.headers,
            body: method === "GET" || method === "HEAD" ? void 0 : body
          });
          const response = await handler(request);
          res.statusCode = response.status;
          response.headers.forEach((v, k) => res.setHeader(k, v));
          const ab = await response.arrayBuffer();
          res.end(Buffer.from(ab));
        } catch (e) {
          res.statusCode = 500;
          res.setHeader("Content-Type", "application/json");
          res.end(JSON.stringify({ error: e?.message || "Internal error" }));
        }
      });
    }
  };
  return {
    // Always include localApiPlugin so it handles /api/connect-domain in dev,
    // even if a proxy (VITE_DEV_API_PROXY/VITE_API_BASE) is configured.
    plugins: [react(), localApiPlugin].filter(Boolean),
    optimizeDeps: {
      exclude: ["lucide-react"]
    },
    server: {
      // Forward /api/* during local dev to deployed serverless functions
      proxy: apiTarget ? {
        "/api": {
          target: apiTarget,
          changeOrigin: true,
          secure: true
        }
      } : void 0
    }
  };
});
export {
  vite_config_default as default
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsidml0ZS5jb25maWcudHMiLCAiYXBpL2Nvbm5lY3QtZG9tYWluLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfZGlybmFtZSA9IFwiQzpcXFxcVXNlcnNcXFxcQUtBTVxcXFxPbmVEcml2ZVxcXFxEZXNrdG9wXFxcXENhdGxvb2dcIjtjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfZmlsZW5hbWUgPSBcIkM6XFxcXFVzZXJzXFxcXEFLQU1cXFxcT25lRHJpdmVcXFxcRGVza3RvcFxcXFxDYXRsb29nXFxcXHZpdGUuY29uZmlnLnRzXCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ltcG9ydF9tZXRhX3VybCA9IFwiZmlsZTovLy9DOi9Vc2Vycy9BS0FNL09uZURyaXZlL0Rlc2t0b3AvQ2F0bG9vZy92aXRlLmNvbmZpZy50c1wiO2ltcG9ydCB7IGRlZmluZUNvbmZpZywgbG9hZEVudiwgUGx1Z2luIH0gZnJvbSAndml0ZSc7XG5pbXBvcnQgZG90ZW52IGZyb20gJ2RvdGVudic7XG5pbXBvcnQgcmVhY3QgZnJvbSAnQHZpdGVqcy9wbHVnaW4tcmVhY3QnO1xuLy8gTG9jYWwgZGV2IGFkYXB0ZXIgZm9yIHNlcnZlcmxlc3MgQVBJIHdpdGhvdXQgZXh0ZXJuYWwgcHJveHlcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXRzLWNvbW1lbnRcbi8vIEB0cy1pZ25vcmVcbmltcG9ydCBjb25uZWN0RG9tYWluSGFuZGxlciBmcm9tICcuL2FwaS9jb25uZWN0LWRvbWFpbic7XG5cbi8vIExvYWQgLmVudiBpbnRvIHByb2Nlc3MuZW52IGZvciBsb2NhbCBkZXYgc28gQVBJIGhhbmRsZXIgc2VlcyBWRVJDRUxfKiB2YXJzXG5kb3RlbnYuY29uZmlnKCk7XG5cbi8vIGh0dHBzOi8vdml0ZWpzLmRldi9jb25maWcvXG5leHBvcnQgZGVmYXVsdCBkZWZpbmVDb25maWcoKHsgbW9kZSB9KSA9PiB7XG4gIGNvbnN0IGVudiA9IGxvYWRFbnYobW9kZSwgcHJvY2Vzcy5jd2QoKSwgJycpO1xuICBjb25zdCBhcGlUYXJnZXQgPSBlbnYuVklURV9ERVZfQVBJX1BST1hZIHx8IGVudi5WSVRFX0FQSV9CQVNFO1xuXG4gIGNvbnN0IGxvY2FsQXBpUGx1Z2luOiBQbHVnaW4gPSB7XG4gICAgbmFtZTogJ2xvY2FsLWFwaS1jb25uZWN0LWRvbWFpbicsXG4gICAgY29uZmlndXJlU2VydmVyKHNlcnZlcikge1xuICAgICAgc2VydmVyLm1pZGRsZXdhcmVzLnVzZSgnL2FwaS9jb25uZWN0LWRvbWFpbicsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IGNodW5rczogVWludDhBcnJheVtdID0gW107XG4gICAgICAgICAgYXdhaXQgbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgIHJlcS5vbignZGF0YScsIChjOiBVaW50OEFycmF5KSA9PiBjaHVua3MucHVzaChjKSk7XG4gICAgICAgICAgICByZXEub24oJ2VuZCcsICgpID0+IHJlc29sdmUoKSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgY29uc3QgYm9keSA9IEJ1ZmZlci5jb25jYXQoY2h1bmtzKTtcbiAgICAgICAgICBjb25zdCBvcmlnaW4gPSBgaHR0cDovL2xvY2FsaG9zdDoke3NlcnZlci5jb25maWcuc2VydmVyLnBvcnQgfHwgNTE3M31gO1xuICAgICAgICAgIGNvbnN0IHVybCA9IG9yaWdpbiArIChyZXEudXJsIHx8ICcvYXBpL2Nvbm5lY3QtZG9tYWluJyk7XG4gICAgICAgICAgY29uc3QgbWV0aG9kID0gKHJlcS5tZXRob2QgfHwgJ0dFVCcpLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KHVybCwge1xuICAgICAgICAgICAgbWV0aG9kLFxuICAgICAgICAgICAgaGVhZGVyczogcmVxLmhlYWRlcnMgYXMgYW55LFxuICAgICAgICAgICAgYm9keTogbWV0aG9kID09PSAnR0VUJyB8fCBtZXRob2QgPT09ICdIRUFEJyA/IHVuZGVmaW5lZCA6IGJvZHksXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgY29uc3QgcmVzcG9uc2U6IFJlc3BvbnNlID0gYXdhaXQgY29ubmVjdERvbWFpbkhhbmRsZXIocmVxdWVzdCk7XG4gICAgICAgICAgcmVzLnN0YXR1c0NvZGUgPSByZXNwb25zZS5zdGF0dXM7XG4gICAgICAgICAgcmVzcG9uc2UuaGVhZGVycy5mb3JFYWNoKCh2LCBrKSA9PiByZXMuc2V0SGVhZGVyKGssIHYpKTtcbiAgICAgICAgICBjb25zdCBhYiA9IGF3YWl0IHJlc3BvbnNlLmFycmF5QnVmZmVyKCk7XG4gICAgICAgICAgcmVzLmVuZChCdWZmZXIuZnJvbShhYikpO1xuICAgICAgICB9IGNhdGNoIChlOiBhbnkpIHtcbiAgICAgICAgICByZXMuc3RhdHVzQ29kZSA9IDUwMDtcbiAgICAgICAgICByZXMuc2V0SGVhZGVyKCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24vanNvbicpO1xuICAgICAgICAgIHJlcy5lbmQoSlNPTi5zdHJpbmdpZnkoeyBlcnJvcjogZT8ubWVzc2FnZSB8fCAnSW50ZXJuYWwgZXJyb3InIH0pKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSxcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIC8vIEFsd2F5cyBpbmNsdWRlIGxvY2FsQXBpUGx1Z2luIHNvIGl0IGhhbmRsZXMgL2FwaS9jb25uZWN0LWRvbWFpbiBpbiBkZXYsXG4gICAgLy8gZXZlbiBpZiBhIHByb3h5IChWSVRFX0RFVl9BUElfUFJPWFkvVklURV9BUElfQkFTRSkgaXMgY29uZmlndXJlZC5cbiAgICBwbHVnaW5zOiBbcmVhY3QoKSwgbG9jYWxBcGlQbHVnaW5dLmZpbHRlcihCb29sZWFuKSBhcyBQbHVnaW5bXSxcbiAgICBvcHRpbWl6ZURlcHM6IHtcbiAgICAgIGV4Y2x1ZGU6IFsnbHVjaWRlLXJlYWN0J10sXG4gICAgfSxcbiAgICBzZXJ2ZXI6IHtcbiAgICAgIC8vIEZvcndhcmQgL2FwaS8qIGR1cmluZyBsb2NhbCBkZXYgdG8gZGVwbG95ZWQgc2VydmVybGVzcyBmdW5jdGlvbnNcbiAgICAgIHByb3h5OiBhcGlUYXJnZXRcbiAgICAgICAgPyB7XG4gICAgICAgICAgICAnL2FwaSc6IHtcbiAgICAgICAgICAgICAgdGFyZ2V0OiBhcGlUYXJnZXQsXG4gICAgICAgICAgICAgIGNoYW5nZU9yaWdpbjogdHJ1ZSxcbiAgICAgICAgICAgICAgc2VjdXJlOiB0cnVlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9XG4gICAgICAgIDogdW5kZWZpbmVkLFxuICAgIH0sXG4gIH07XG59KTtcbiIsICJjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfZGlybmFtZSA9IFwiQzpcXFxcVXNlcnNcXFxcQUtBTVxcXFxPbmVEcml2ZVxcXFxEZXNrdG9wXFxcXENhdGxvb2dcXFxcYXBpXCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ZpbGVuYW1lID0gXCJDOlxcXFxVc2Vyc1xcXFxBS0FNXFxcXE9uZURyaXZlXFxcXERlc2t0b3BcXFxcQ2F0bG9vZ1xcXFxhcGlcXFxcY29ubmVjdC1kb21haW4udHNcIjtjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfaW1wb3J0X21ldGFfdXJsID0gXCJmaWxlOi8vL0M6L1VzZXJzL0FLQU0vT25lRHJpdmUvRGVza3RvcC9DYXRsb29nL2FwaS9jb25uZWN0LWRvbWFpbi50c1wiOy8vIEVkZ2UgcnVudGltZSAoRVNNKSB0byBhdm9pZCBDSlMvRVNNIG1pc21hdGNoXG5leHBvcnQgY29uc3QgY29uZmlnID0geyBydW50aW1lOiAnZWRnZScgfTtcblxuY29uc3QgQUxMT1dFRF9PUklHSU5TID0gbmV3IFNldChbXG4gICdodHRwOi8vbG9jYWxob3N0OjUxNzMnLFxuICAnaHR0cDovLzEyNy4wLjAuMTo1MTczJyxcbiAgJ2h0dHA6Ly9sb2NhbGhvc3Q6NDE3MycsIC8vIHZpdGUgcHJldmlld1xuICAnaHR0cDovLzEyNy4wLjAuMTo0MTczJyxcbiAgJ2h0dHBzOi8vY2F0bG9vZy52ZXJjZWwuYXBwJyxcbiAgJ2h0dHBzOi8vd3d3LmNhdGxvb2cudmVyY2VsLmFwcCcsXG5dKTtcblxuZnVuY3Rpb24gd2l0aENvcnMocmVzcDogUmVzcG9uc2UsIG9yaWdpbj86IHN0cmluZykge1xuICBjb25zdCBoZWFkZXJzID0gbmV3IEhlYWRlcnMocmVzcC5oZWFkZXJzKTtcbiAgaWYgKG9yaWdpbiAmJiBBTExPV0VEX09SSUdJTlMuaGFzKG9yaWdpbikpIHtcbiAgICBoZWFkZXJzLnNldCgnQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJywgb3JpZ2luKTtcbiAgICBoZWFkZXJzLnNldCgnVmFyeScsICdPcmlnaW4nKTtcbiAgfVxuICBoZWFkZXJzLnNldCgnQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kcycsICdQT1NULCBHRVQsIE9QVElPTlMnKTtcbiAgaGVhZGVycy5zZXQoJ0FjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnMnLCAnQ29udGVudC1UeXBlLCBBdXRob3JpemF0aW9uJyk7XG4gIGhlYWRlcnMuc2V0KCdBY2Nlc3MtQ29udHJvbC1NYXgtQWdlJywgJzg2NDAwJyk7XG4gIHJldHVybiBuZXcgUmVzcG9uc2UocmVzcC5ib2R5LCB7IHN0YXR1czogcmVzcC5zdGF0dXMsIGhlYWRlcnMgfSk7XG59XG5cbmZ1bmN0aW9uIGNvcnNKc29uKG9yaWdpbjogc3RyaW5nIHwgbnVsbCwgb2JqOiBhbnksIHN0YXR1cyA9IDIwMCkge1xuICBjb25zdCByZXNwID0gbmV3IFJlc3BvbnNlKEpTT04uc3RyaW5naWZ5KG9iaiksIHtcbiAgICBzdGF0dXMsXG4gICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gIH0pO1xuICByZXR1cm4gd2l0aENvcnMocmVzcCwgb3JpZ2luIHx8IHVuZGVmaW5lZCk7XG59XG5cbi8vIFRoaXMgZnVuY3Rpb24gY29ubmVjdHMgKGFkZHMpIGEgY3VzdG9tIGRvbWFpbiB0byB0aGUgY3VycmVudCBWZXJjZWwgcHJvamVjdCB2aWEgVmVyY2VsIFJFU1QgQVBJXG4vLyBSZXF1aXJlZCBlbnYgdmFyczogVkVSQ0VMX1BST0pFQ1RfSUQsIFZFUkNFTF9UT0tFTiwgb3B0aW9uYWwgVkVSQ0VMX1RFQU1fSURcbi8vIFJlcXVlc3QgYm9keTogeyBkb21haW46IHN0cmluZyB9XG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcTogUmVxdWVzdCk6IFByb21pc2U8UmVzcG9uc2U+IHtcbiAgY29uc3QgdXJsID0gbmV3IFVSTChyZXEudXJsKTtcbiAgY29uc3Qgb3JpZ2luID0gcmVxLmhlYWRlcnMuZ2V0KCdvcmlnaW4nKTtcbiAgaWYgKHJlcS5tZXRob2QgPT09ICdPUFRJT05TJykge1xuICAgIC8vIFByZWZsaWdodFxuICAgIHJldHVybiB3aXRoQ29ycyhuZXcgUmVzcG9uc2UobnVsbCwgeyBzdGF0dXM6IDIwNCB9KSwgb3JpZ2luIHx8IHVuZGVmaW5lZCk7XG4gIH1cbiAgaWYgKHJlcS5tZXRob2QgPT09ICdHRVQnICYmIHVybC5zZWFyY2hQYXJhbXMuZ2V0KCdkZWJ1ZycpID09PSAnMScpIHtcbiAgICBjb25zdCBzdG9yZXNQcm9qZWN0SWQgPSAocHJvY2VzcyBhcyBhbnkpPy5lbnY/LlZFUkNFTF9TVE9SRVNfUFJPSkVDVF9JRCBhcyBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gICAgY29uc3QgcHJvamVjdElkID0gKHByb2Nlc3MgYXMgYW55KT8uZW52Py5WRVJDRUxfUFJPSkVDVF9JRCBhcyBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gICAgY29uc3QgdG9rZW4gPSAocHJvY2VzcyBhcyBhbnkpPy5lbnY/LlZFUkNFTF9UT0tFTiBhcyBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gICAgY29uc3QgdGVhbUlkID0gKHByb2Nlc3MgYXMgYW55KT8uZW52Py5WRVJDRUxfVEVBTV9JRCBhcyBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIGNvcnNKc29uKG9yaWdpbiwge1xuICAgICAgb2s6IHRydWUsXG4gICAgICBlbnY6IHtcbiAgICAgICAgVkVSQ0VMX1NUT1JFU19QUk9KRUNUX0lEOiBCb29sZWFuKHN0b3Jlc1Byb2plY3RJZCksXG4gICAgICAgIFZFUkNFTF9QUk9KRUNUX0lEOiBCb29sZWFuKHByb2plY3RJZCksXG4gICAgICAgIFZFUkNFTF9UT0tFTjogQm9vbGVhbih0b2tlbiksXG4gICAgICAgIFZFUkNFTF9URUFNX0lEOiBCb29sZWFuKHRlYW1JZCksXG4gICAgICB9LFxuICAgICAgcnVudGltZTogJ2VkZ2UnLFxuICAgIH0pO1xuICB9XG4gIC8vIEdFVCBzdGF0dXM6IC9hcGkvY29ubmVjdC1kb21haW4/c3RhdHVzPTEmZG9tYWluPWZvby5jb21cbiAgaWYgKHJlcS5tZXRob2QgPT09ICdHRVQnICYmIHVybC5zZWFyY2hQYXJhbXMuZ2V0KCdzdGF0dXMnKSA9PT0gJzEnKSB7XG4gICAgY29uc3QgZG9tYWluID0gdXJsLnNlYXJjaFBhcmFtcy5nZXQoJ2RvbWFpbicpO1xuICAgIGNvbnN0IHByb2plY3RJZCA9ICgocHJvY2VzcyBhcyBhbnkpPy5lbnY/LlZFUkNFTF9TVE9SRVNfUFJPSkVDVF9JRCBhcyBzdHJpbmcgfCB1bmRlZmluZWQpIHx8ICgocHJvY2VzcyBhcyBhbnkpPy5lbnY/LlZFUkNFTF9QUk9KRUNUX0lEIGFzIHN0cmluZyB8IHVuZGVmaW5lZCk7XG4gICAgY29uc3QgdG9rZW4gPSAocHJvY2VzcyBhcyBhbnkpPy5lbnY/LlZFUkNFTF9UT0tFTiBhcyBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gICAgY29uc3QgdGVhbUlkID0gKHByb2Nlc3MgYXMgYW55KT8uZW52Py5WRVJDRUxfVEVBTV9JRCBhcyBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gICAgaWYgKCFwcm9qZWN0SWQgfHwgIXRva2VuKSByZXR1cm4gY29yc0pzb24ob3JpZ2luLCB7IGVycm9yOiAnTWlzc2luZyBWZXJjZWwgY3JlZGVudGlhbHMgb24gc2VydmVyJyB9LCA1MDApO1xuICAgIGlmICghZG9tYWluKSByZXR1cm4gY29yc0pzb24ob3JpZ2luLCB7IGVycm9yOiAnTWlzc2luZyBkb21haW4nIH0sIDQwMCk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3Qgc3RhdHVzVXJsID0gbmV3IFVSTChgaHR0cHM6Ly9hcGkudmVyY2VsLmNvbS92Ni9kb21haW5zLyR7ZW5jb2RlVVJJQ29tcG9uZW50KGRvbWFpbil9YCk7XG4gICAgICBpZiAodGVhbUlkKSBzdGF0dXNVcmwuc2VhcmNoUGFyYW1zLnNldCgndGVhbUlkJywgdGVhbUlkKTtcbiAgICAgIGNvbnN0IHN0YXR1c1Jlc3AgPSBhd2FpdCBmZXRjaChzdGF0dXNVcmwudG9TdHJpbmcoKSwge1xuICAgICAgICBoZWFkZXJzOiB7IEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbn1gIH0sXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IHRleHQgPSBhd2FpdCBzdGF0dXNSZXNwLnRleHQoKTtcbiAgICAgIGNvbnN0IGRhdGEgPSB0ZXh0ID8gSlNPTi5wYXJzZSh0ZXh0KSA6IG51bGw7XG4gICAgICBpZiAoIXN0YXR1c1Jlc3Aub2spIHtcbiAgICAgICAgcmV0dXJuIGNvcnNKc29uKG9yaWdpbiwgeyBlcnJvcjogZGF0YT8uZXJyb3I/Lm1lc3NhZ2UgfHwgZGF0YSB8fCAnRmFpbGVkIHRvIGZldGNoIGRvbWFpbiBzdGF0dXMnIH0sIHN0YXR1c1Jlc3Auc3RhdHVzKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjb3JzSnNvbihvcmlnaW4sIHsgb2s6IHRydWUsIGRvbWFpbiwgLi4uZGF0YSB9KTtcbiAgICB9IGNhdGNoIChlOiBhbnkpIHtcbiAgICAgIHJldHVybiBjb3JzSnNvbihvcmlnaW4sIHsgZXJyb3I6IGU/Lm1lc3NhZ2UgfHwgJ1VuZXhwZWN0ZWQgZXJyb3InIH0sIDUwMCk7XG4gICAgfVxuICB9XG4gIGlmIChyZXEubWV0aG9kICE9PSAnUE9TVCcgJiYgcmVxLm1ldGhvZCAhPT0gJ0RFTEVURScpIHtcbiAgICByZXR1cm4gY29yc0pzb24ob3JpZ2luLCB7IGVycm9yOiAnTWV0aG9kIE5vdCBBbGxvd2VkJyB9LCA0MDUpO1xuICB9XG5cbiAgbGV0IGJvZHk6IGFueSA9IG51bGw7XG4gIHRyeSB7XG4gICAgYm9keSA9IGF3YWl0IHJlcS5qc29uKCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gY29yc0pzb24ob3JpZ2luLCB7IGVycm9yOiAnSW52YWxpZCBKU09OIGJvZHknIH0sIDQwMCk7XG4gIH1cblxuICBjb25zdCBkb21haW4gPSBib2R5Py5kb21haW47XG4gIGlmICghZG9tYWluIHx8IHR5cGVvZiBkb21haW4gIT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIGNvcnNKc29uKG9yaWdpbiwgeyBlcnJvcjogJ01pc3NpbmcgZG9tYWluJyB9LCA0MDApO1xuICB9XG4gIC8vIEJhc2ljIGRvbWFpbiB2YWxpZGF0aW9uIChBU0NJSSBvbmx5OyBJRE4gY2FuIGJlIGV4dGVuZGVkIGxhdGVyKVxuICBjb25zdCBkb21haW5SZWdleCA9IC9eKD86W2EtekEtWjAtOV0oPzpbYS16QS1aMC05LV17MCw2MX1bYS16QS1aMC05XSk/XFwuKStbQS1aYS16XXsyLH0kLztcblxuICBjb25zdCBwcm9qZWN0SWQgPSAoKHByb2Nlc3MgYXMgYW55KT8uZW52Py5WRVJDRUxfU1RPUkVTX1BST0pFQ1RfSUQgYXMgc3RyaW5nIHwgdW5kZWZpbmVkKSB8fCAoKHByb2Nlc3MgYXMgYW55KT8uZW52Py5WRVJDRUxfUFJPSkVDVF9JRCBhcyBzdHJpbmcgfCB1bmRlZmluZWQpO1xuICBjb25zdCB0b2tlbiA9IChwcm9jZXNzIGFzIGFueSk/LmVudj8uVkVSQ0VMX1RPS0VOIGFzIHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgY29uc3QgdGVhbUlkID0gKHByb2Nlc3MgYXMgYW55KT8uZW52Py5WRVJDRUxfVEVBTV9JRCBhcyBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gIGlmICghcHJvamVjdElkIHx8ICF0b2tlbikge1xuICAgIHJldHVybiBjb3JzSnNvbihvcmlnaW4sIHsgZXJyb3I6ICdNaXNzaW5nIFZlcmNlbCBjcmVkZW50aWFscyBvbiBzZXJ2ZXInIH0sIDUwMCk7XG4gIH1cblxuICBpZiAocmVxLm1ldGhvZCA9PT0gJ0RFTEVURScpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZGVsVXJsID0gbmV3IFVSTChgaHR0cHM6Ly9hcGkudmVyY2VsLmNvbS92OS9wcm9qZWN0cy8ke2VuY29kZVVSSUNvbXBvbmVudChwcm9qZWN0SWQpfS9kb21haW5zLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhkb21haW4pKX1gKTtcbiAgICAgIGlmICh0ZWFtSWQpIGRlbFVybC5zZWFyY2hQYXJhbXMuc2V0KCd0ZWFtSWQnLCB0ZWFtSWQpO1xuICAgICAgY29uc3QgZGVsUmVzcCA9IGF3YWl0IGZldGNoKGRlbFVybC50b1N0cmluZygpLCB7XG4gICAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICAgIGhlYWRlcnM6IHsgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VufWAgfSxcbiAgICAgIH0pO1xuICAgICAgY29uc3QgdGV4dCA9IGF3YWl0IGRlbFJlc3AudGV4dCgpO1xuICAgICAgbGV0IGRhdGE6IGFueSA9IG51bGw7IHRyeSB7IGRhdGEgPSB0ZXh0ID8gSlNPTi5wYXJzZSh0ZXh0KSA6IG51bGw7IH0gY2F0Y2gge31cbiAgICAgIGlmICghZGVsUmVzcC5vaykge1xuICAgICAgICByZXR1cm4gY29yc0pzb24ob3JpZ2luLCB7IGVycm9yOiBkYXRhPy5lcnJvcj8ubWVzc2FnZSB8fCBkYXRhIHx8ICdGYWlsZWQgdG8gcmVtb3ZlIGRvbWFpbicgfSwgZGVsUmVzcC5zdGF0dXMpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNvcnNKc29uKG9yaWdpbiwgeyBzdWNjZXNzOiB0cnVlLCByZW1vdmVkOiB0cnVlLCBkb21haW46IFN0cmluZyhkb21haW4pIH0pO1xuICAgIH0gY2F0Y2ggKGU6IGFueSkge1xuICAgICAgcmV0dXJuIGNvcnNKc29uKG9yaWdpbiwgeyBlcnJvcjogZT8ubWVzc2FnZSB8fCAnVW5leHBlY3RlZCBlcnJvcicgfSwgNTAwKTtcbiAgICB9XG4gIH1cblxuICBjb25zdCBub3JtYWxpemVkID0gU3RyaW5nKGRvbWFpbikudHJpbSgpLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXmh0dHBzPzpcXC9cXC8vLCAnJykucmVwbGFjZSgvXFwvJC8sICcnKTtcbiAgaWYgKCFkb21haW5SZWdleC50ZXN0KG5vcm1hbGl6ZWQpKSB7XG4gICAgcmV0dXJuIGNvcnNKc29uKG9yaWdpbiwgeyBlcnJvcjogJ0ludmFsaWQgZG9tYWluIGZvcm1hdCcgfSwgNDAwKTtcbiAgfVxuICBjb25zdCBpc0FwZXggPSBub3JtYWxpemVkLnNwbGl0KCcuJykubGVuZ3RoID09PSAyOyAvLyBleGFtcGxlLmNvbVxuXG4gIHRyeSB7XG4gICAgY29uc3QgYWRkVXJsID0gbmV3IFVSTChgaHR0cHM6Ly9hcGkudmVyY2VsLmNvbS92MTAvcHJvamVjdHMvJHtlbmNvZGVVUklDb21wb25lbnQocHJvamVjdElkKX0vZG9tYWluc2ApO1xuICAgIGlmICh0ZWFtSWQpIGFkZFVybC5zZWFyY2hQYXJhbXMuc2V0KCd0ZWFtSWQnLCB0ZWFtSWQpO1xuICAgIGNvbnN0IGFkZFJlc3AgPSBhd2FpdCBmZXRjaChhZGRVcmwudG9TdHJpbmcoKSwge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbn1gLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbmFtZTogbm9ybWFsaXplZCB9KSxcbiAgICB9KTtcblxuICAgIGxldCBhZGREYXRhOiBhbnkgPSBudWxsO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB0ZXh0ID0gYXdhaXQgYWRkUmVzcC50ZXh0KCk7XG4gICAgICBhZGREYXRhID0gdGV4dCA/IEpTT04ucGFyc2UodGV4dCkgOiBudWxsO1xuICAgIH0gY2F0Y2gge31cblxuICAgIGlmICghYWRkUmVzcC5vaykge1xuICAgICAgY29uc3QgY29kZSA9IGFkZERhdGE/LmVycm9yPy5jb2RlIHx8IGFkZERhdGE/LmNvZGU7XG4gICAgICBpZiAoIShjb2RlICYmIFN0cmluZyhjb2RlKS5pbmNsdWRlcygnZG9tYWluX2FscmVhZHknKSkpIHtcbiAgICAgICAgLy8gQ29tbW9uIGhlbHBmdWwgbWVzc2FnZXNcbiAgICAgICAgaWYgKGNvZGUgPT09ICdkb21haW5fY29uZmxpY3QnIHx8IGNvZGUgPT09ICdkb21haW5fYWxyZWFkeV9pbl91c2UnKSB7XG4gICAgICAgICAgcmV0dXJuIGNvcnNKc29uKG9yaWdpbiwgeyBlcnJvcjogJ0RvbWFpbiBpcyBhbHJlYWR5IGluIHVzZSBieSBhbm90aGVyIHByb2plY3Qgb3IgdGVhbSBvbiBWZXJjZWwuIFJlbW92ZSBpdCB0aGVyZSBmaXJzdCBvciB0cmFuc2ZlciBvd25lcnNoaXAuJyB9LCA0MDkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhZGRSZXNwLnN0YXR1cyA9PT0gNDAxIHx8IGFkZFJlc3Auc3RhdHVzID09PSA0MDMpIHtcbiAgICAgICAgICByZXR1cm4gY29yc0pzb24ob3JpZ2luLCB7IGVycm9yOiAnVW5hdXRob3JpemVkOiBDaGVjayBWRVJDRUxfVE9LRU4gYW5kIFZFUkNFTF9URUFNX0lEIChpZiB1c2luZyBhIFRlYW0pLicgfSwgYWRkUmVzcC5zdGF0dXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhZGRSZXNwLnN0YXR1cyA9PT0gNDA0KSB7XG4gICAgICAgICAgcmV0dXJuIGNvcnNKc29uKG9yaWdpbiwgeyBlcnJvcjogJ1Byb2plY3Qgbm90IGZvdW5kOiBWZXJpZnkgVkVSQ0VMX1BST0pFQ1RfSUQgYmVsb25ncyB0byB0aGlzIHByb2plY3QvYWNjb3VudC90ZWFtLicgfSwgNDA0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29yc0pzb24ob3JpZ2luLCB7IGVycm9yOiBhZGREYXRhPy5lcnJvcj8ubWVzc2FnZSB8fCBhZGREYXRhIHx8ICdGYWlsZWQgdG8gYWRkIGRvbWFpbicgfSwgYWRkUmVzcC5zdGF0dXMpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFRyaWdnZXIgdmVyaWZpY2F0aW9uIGV4cGxpY2l0bHkgKGJlc3QtZWZmb3J0KVxuICAgIHRyeSB7XG4gICAgICBjb25zdCB2ZXJpZnlVcmwgPSBuZXcgVVJMKGBodHRwczovL2FwaS52ZXJjZWwuY29tL3Y2L2RvbWFpbnMvJHtlbmNvZGVVUklDb21wb25lbnQobm9ybWFsaXplZCl9L3ZlcmlmeWApO1xuICAgICAgaWYgKHRlYW1JZCkgdmVyaWZ5VXJsLnNlYXJjaFBhcmFtcy5zZXQoJ3RlYW1JZCcsIHRlYW1JZCk7XG4gICAgICBhd2FpdCBmZXRjaCh2ZXJpZnlVcmwudG9TdHJpbmcoKSwge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczogeyBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dG9rZW59YCB9LFxuICAgICAgfSk7XG4gICAgfSBjYXRjaCB7fVxuXG4gICAgY29uc3Qgc3RhdHVzVXJsID0gbmV3IFVSTChgaHR0cHM6Ly9hcGkudmVyY2VsLmNvbS92Ni9kb21haW5zLyR7ZW5jb2RlVVJJQ29tcG9uZW50KG5vcm1hbGl6ZWQpfWApO1xuICAgIGlmICh0ZWFtSWQpIHN0YXR1c1VybC5zZWFyY2hQYXJhbXMuc2V0KCd0ZWFtSWQnLCB0ZWFtSWQpO1xuICAgIGNvbnN0IHN0YXR1c1Jlc3AgPSBhd2FpdCBmZXRjaChzdGF0dXNVcmwudG9TdHJpbmcoKSwge1xuICAgICAgaGVhZGVyczogeyBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dG9rZW59YCB9LFxuICAgIH0pO1xuICAgIGxldCBzdGF0dXNEYXRhOiBhbnkgPSBudWxsO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB0ZXh0ID0gYXdhaXQgc3RhdHVzUmVzcC50ZXh0KCk7XG4gICAgICBzdGF0dXNEYXRhID0gdGV4dCA/IEpTT04ucGFyc2UodGV4dCkgOiBudWxsO1xuICAgIH0gY2F0Y2gge31cblxuICAgIGlmICghc3RhdHVzUmVzcC5vaykge1xuICAgICAgcmV0dXJuIGNvcnNKc29uKG9yaWdpbiwgeyBlcnJvcjogc3RhdHVzRGF0YT8uZXJyb3I/Lm1lc3NhZ2UgfHwgc3RhdHVzRGF0YSB8fCAnRmFpbGVkIHRvIGZldGNoIGRvbWFpbiBzdGF0dXMnIH0sIHN0YXR1c1Jlc3Auc3RhdHVzKTtcbiAgICB9XG5cbiAgICBjb25zdCB2ZXJpZmllZCA9IEJvb2xlYW4oc3RhdHVzRGF0YT8udmVyaWZpZWQpO1xuICAgIGNvbnN0IHR4dFJlY29yZHMgPSBzdGF0dXNEYXRhPy52ZXJpZmljYXRpb24gfHwgW107XG5cbiAgICByZXR1cm4gY29yc0pzb24ob3JpZ2luLCB7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgZG9tYWluOiBub3JtYWxpemVkLFxuICAgICAgdmVyaWZpZWQsXG4gICAgICBuZWVkc0ROUzogIXZlcmlmaWVkLFxuICAgICAgaW5zdHJ1Y3Rpb25zOiB2ZXJpZmllZFxuICAgICAgICA/ICdEb21haW4gaXMgdmVyaWZpZWQgYW5kIGFjdGl2ZS4nXG4gICAgICAgIDogaXNBcGV4XG4gICAgICAgICAgPyAnQ3JlYXRlIGFuIEEgcmVjb3JkIHBvaW50aW5nIHRvIDc2Ljc2LjIxLjIxLiBGb3Igd3d3LCBhZGQgQ05BTUUgdG8gY25hbWUudmVyY2VsLWRucy5jb20sIHRoZW4gcmV0cnkuJ1xuICAgICAgICAgIDogJ0NyZWF0ZSBhIENOQU1FIHBvaW50aW5nIHRvIGNuYW1lLnZlcmNlbC1kbnMuY29tIGZvciB0aGlzIHN1YmRvbWFpbiwgdGhlbiByZXRyeS4nLFxuICAgICAgdmVyaWZpY2F0aW9uOiB0eHRSZWNvcmRzLFxuICAgIH0pO1xuICB9IGNhdGNoIChlOiBhbnkpIHtcbiAgICByZXR1cm4gY29yc0pzb24ob3JpZ2luLCB7IGVycm9yOiBlPy5tZXNzYWdlIHx8ICdVbmV4cGVjdGVkIGVycm9yJyB9LCA1MDApO1xuICB9XG59XG5cbiJdLAogICJtYXBwaW5ncyI6ICI7QUFBZ1QsU0FBUyxjQUFjLGVBQXVCO0FBQzlWLE9BQU8sWUFBWTtBQUNuQixPQUFPLFdBQVc7OztBQ0NsQixJQUFNLGtCQUFrQixvQkFBSSxJQUFJO0FBQUEsRUFDOUI7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQ0YsQ0FBQztBQUVELFNBQVMsU0FBUyxNQUFnQixRQUFpQjtBQUNqRCxRQUFNLFVBQVUsSUFBSSxRQUFRLEtBQUssT0FBTztBQUN4QyxNQUFJLFVBQVUsZ0JBQWdCLElBQUksTUFBTSxHQUFHO0FBQ3pDLFlBQVEsSUFBSSwrQkFBK0IsTUFBTTtBQUNqRCxZQUFRLElBQUksUUFBUSxRQUFRO0FBQUEsRUFDOUI7QUFDQSxVQUFRLElBQUksZ0NBQWdDLG9CQUFvQjtBQUNoRSxVQUFRLElBQUksZ0NBQWdDLDZCQUE2QjtBQUN6RSxVQUFRLElBQUksMEJBQTBCLE9BQU87QUFDN0MsU0FBTyxJQUFJLFNBQVMsS0FBSyxNQUFNLEVBQUUsUUFBUSxLQUFLLFFBQVEsUUFBUSxDQUFDO0FBQ2pFO0FBRUEsU0FBUyxTQUFTLFFBQXVCLEtBQVUsU0FBUyxLQUFLO0FBQy9ELFFBQU0sT0FBTyxJQUFJLFNBQVMsS0FBSyxVQUFVLEdBQUcsR0FBRztBQUFBLElBQzdDO0FBQUEsSUFDQSxTQUFTLEVBQUUsZ0JBQWdCLG1CQUFtQjtBQUFBLEVBQ2hELENBQUM7QUFDRCxTQUFPLFNBQVMsTUFBTSxVQUFVLE1BQVM7QUFDM0M7QUFLQSxlQUFPLFFBQStCLEtBQWlDO0FBQ3JFLFFBQU0sTUFBTSxJQUFJLElBQUksSUFBSSxHQUFHO0FBQzNCLFFBQU0sU0FBUyxJQUFJLFFBQVEsSUFBSSxRQUFRO0FBQ3ZDLE1BQUksSUFBSSxXQUFXLFdBQVc7QUFFNUIsV0FBTyxTQUFTLElBQUksU0FBUyxNQUFNLEVBQUUsUUFBUSxJQUFJLENBQUMsR0FBRyxVQUFVLE1BQVM7QUFBQSxFQUMxRTtBQUNBLE1BQUksSUFBSSxXQUFXLFNBQVMsSUFBSSxhQUFhLElBQUksT0FBTyxNQUFNLEtBQUs7QUFDakUsVUFBTSxrQkFBbUIsU0FBaUIsS0FBSztBQUMvQyxVQUFNQSxhQUFhLFNBQWlCLEtBQUs7QUFDekMsVUFBTUMsU0FBUyxTQUFpQixLQUFLO0FBQ3JDLFVBQU1DLFVBQVUsU0FBaUIsS0FBSztBQUN0QyxXQUFPLFNBQVMsUUFBUTtBQUFBLE1BQ3RCLElBQUk7QUFBQSxNQUNKLEtBQUs7QUFBQSxRQUNILDBCQUEwQixRQUFRLGVBQWU7QUFBQSxRQUNqRCxtQkFBbUIsUUFBUUYsVUFBUztBQUFBLFFBQ3BDLGNBQWMsUUFBUUMsTUFBSztBQUFBLFFBQzNCLGdCQUFnQixRQUFRQyxPQUFNO0FBQUEsTUFDaEM7QUFBQSxNQUNBLFNBQVM7QUFBQSxJQUNYLENBQUM7QUFBQSxFQUNIO0FBRUEsTUFBSSxJQUFJLFdBQVcsU0FBUyxJQUFJLGFBQWEsSUFBSSxRQUFRLE1BQU0sS0FBSztBQUNsRSxVQUFNQyxVQUFTLElBQUksYUFBYSxJQUFJLFFBQVE7QUFDNUMsVUFBTUgsYUFBYyxTQUFpQixLQUFLLDRCQUFxRCxTQUFpQixLQUFLO0FBQ3JILFVBQU1DLFNBQVMsU0FBaUIsS0FBSztBQUNyQyxVQUFNQyxVQUFVLFNBQWlCLEtBQUs7QUFDdEMsUUFBSSxDQUFDRixjQUFhLENBQUNDLE9BQU8sUUFBTyxTQUFTLFFBQVEsRUFBRSxPQUFPLHVDQUF1QyxHQUFHLEdBQUc7QUFDeEcsUUFBSSxDQUFDRSxRQUFRLFFBQU8sU0FBUyxRQUFRLEVBQUUsT0FBTyxpQkFBaUIsR0FBRyxHQUFHO0FBRXJFLFFBQUk7QUFDRixZQUFNLFlBQVksSUFBSSxJQUFJLHFDQUFxQyxtQkFBbUJBLE9BQU0sQ0FBQyxFQUFFO0FBQzNGLFVBQUlELFFBQVEsV0FBVSxhQUFhLElBQUksVUFBVUEsT0FBTTtBQUN2RCxZQUFNLGFBQWEsTUFBTSxNQUFNLFVBQVUsU0FBUyxHQUFHO0FBQUEsUUFDbkQsU0FBUyxFQUFFLGVBQWUsVUFBVUQsTUFBSyxHQUFHO0FBQUEsTUFDOUMsQ0FBQztBQUNELFlBQU0sT0FBTyxNQUFNLFdBQVcsS0FBSztBQUNuQyxZQUFNLE9BQU8sT0FBTyxLQUFLLE1BQU0sSUFBSSxJQUFJO0FBQ3ZDLFVBQUksQ0FBQyxXQUFXLElBQUk7QUFDbEIsZUFBTyxTQUFTLFFBQVEsRUFBRSxPQUFPLE1BQU0sT0FBTyxXQUFXLFFBQVEsZ0NBQWdDLEdBQUcsV0FBVyxNQUFNO0FBQUEsTUFDdkg7QUFDQSxhQUFPLFNBQVMsUUFBUSxFQUFFLElBQUksTUFBTSxRQUFBRSxTQUFRLEdBQUcsS0FBSyxDQUFDO0FBQUEsSUFDdkQsU0FBUyxHQUFRO0FBQ2YsYUFBTyxTQUFTLFFBQVEsRUFBRSxPQUFPLEdBQUcsV0FBVyxtQkFBbUIsR0FBRyxHQUFHO0FBQUEsSUFDMUU7QUFBQSxFQUNGO0FBQ0EsTUFBSSxJQUFJLFdBQVcsVUFBVSxJQUFJLFdBQVcsVUFBVTtBQUNwRCxXQUFPLFNBQVMsUUFBUSxFQUFFLE9BQU8scUJBQXFCLEdBQUcsR0FBRztBQUFBLEVBQzlEO0FBRUEsTUFBSSxPQUFZO0FBQ2hCLE1BQUk7QUFDRixXQUFPLE1BQU0sSUFBSSxLQUFLO0FBQUEsRUFDeEIsU0FBUyxHQUFHO0FBQ1YsV0FBTyxTQUFTLFFBQVEsRUFBRSxPQUFPLG9CQUFvQixHQUFHLEdBQUc7QUFBQSxFQUM3RDtBQUVBLFFBQU0sU0FBUyxNQUFNO0FBQ3JCLE1BQUksQ0FBQyxVQUFVLE9BQU8sV0FBVyxVQUFVO0FBQ3pDLFdBQU8sU0FBUyxRQUFRLEVBQUUsT0FBTyxpQkFBaUIsR0FBRyxHQUFHO0FBQUEsRUFDMUQ7QUFFQSxRQUFNLGNBQWM7QUFFcEIsUUFBTSxZQUFjLFNBQWlCLEtBQUssNEJBQXFELFNBQWlCLEtBQUs7QUFDckgsUUFBTSxRQUFTLFNBQWlCLEtBQUs7QUFDckMsUUFBTSxTQUFVLFNBQWlCLEtBQUs7QUFDdEMsTUFBSSxDQUFDLGFBQWEsQ0FBQyxPQUFPO0FBQ3hCLFdBQU8sU0FBUyxRQUFRLEVBQUUsT0FBTyx1Q0FBdUMsR0FBRyxHQUFHO0FBQUEsRUFDaEY7QUFFQSxNQUFJLElBQUksV0FBVyxVQUFVO0FBQzNCLFFBQUk7QUFDRixZQUFNLFNBQVMsSUFBSSxJQUFJLHNDQUFzQyxtQkFBbUIsU0FBUyxDQUFDLFlBQVksbUJBQW1CLE9BQU8sTUFBTSxDQUFDLENBQUMsRUFBRTtBQUMxSSxVQUFJLE9BQVEsUUFBTyxhQUFhLElBQUksVUFBVSxNQUFNO0FBQ3BELFlBQU0sVUFBVSxNQUFNLE1BQU0sT0FBTyxTQUFTLEdBQUc7QUFBQSxRQUM3QyxRQUFRO0FBQUEsUUFDUixTQUFTLEVBQUUsZUFBZSxVQUFVLEtBQUssR0FBRztBQUFBLE1BQzlDLENBQUM7QUFDRCxZQUFNLE9BQU8sTUFBTSxRQUFRLEtBQUs7QUFDaEMsVUFBSSxPQUFZO0FBQU0sVUFBSTtBQUFFLGVBQU8sT0FBTyxLQUFLLE1BQU0sSUFBSSxJQUFJO0FBQUEsTUFBTSxRQUFRO0FBQUEsTUFBQztBQUM1RSxVQUFJLENBQUMsUUFBUSxJQUFJO0FBQ2YsZUFBTyxTQUFTLFFBQVEsRUFBRSxPQUFPLE1BQU0sT0FBTyxXQUFXLFFBQVEsMEJBQTBCLEdBQUcsUUFBUSxNQUFNO0FBQUEsTUFDOUc7QUFDQSxhQUFPLFNBQVMsUUFBUSxFQUFFLFNBQVMsTUFBTSxTQUFTLE1BQU0sUUFBUSxPQUFPLE1BQU0sRUFBRSxDQUFDO0FBQUEsSUFDbEYsU0FBUyxHQUFRO0FBQ2YsYUFBTyxTQUFTLFFBQVEsRUFBRSxPQUFPLEdBQUcsV0FBVyxtQkFBbUIsR0FBRyxHQUFHO0FBQUEsSUFDMUU7QUFBQSxFQUNGO0FBRUEsUUFBTSxhQUFhLE9BQU8sTUFBTSxFQUFFLEtBQUssRUFBRSxZQUFZLEVBQUUsUUFBUSxnQkFBZ0IsRUFBRSxFQUFFLFFBQVEsT0FBTyxFQUFFO0FBQ3BHLE1BQUksQ0FBQyxZQUFZLEtBQUssVUFBVSxHQUFHO0FBQ2pDLFdBQU8sU0FBUyxRQUFRLEVBQUUsT0FBTyx3QkFBd0IsR0FBRyxHQUFHO0FBQUEsRUFDakU7QUFDQSxRQUFNLFNBQVMsV0FBVyxNQUFNLEdBQUcsRUFBRSxXQUFXO0FBRWhELE1BQUk7QUFDRixVQUFNLFNBQVMsSUFBSSxJQUFJLHVDQUF1QyxtQkFBbUIsU0FBUyxDQUFDLFVBQVU7QUFDckcsUUFBSSxPQUFRLFFBQU8sYUFBYSxJQUFJLFVBQVUsTUFBTTtBQUNwRCxVQUFNLFVBQVUsTUFBTSxNQUFNLE9BQU8sU0FBUyxHQUFHO0FBQUEsTUFDN0MsUUFBUTtBQUFBLE1BQ1IsU0FBUztBQUFBLFFBQ1AsZ0JBQWdCO0FBQUEsUUFDaEIsZUFBZSxVQUFVLEtBQUs7QUFBQSxNQUNoQztBQUFBLE1BQ0EsTUFBTSxLQUFLLFVBQVUsRUFBRSxNQUFNLFdBQVcsQ0FBQztBQUFBLElBQzNDLENBQUM7QUFFRCxRQUFJLFVBQWU7QUFDbkIsUUFBSTtBQUNGLFlBQU0sT0FBTyxNQUFNLFFBQVEsS0FBSztBQUNoQyxnQkFBVSxPQUFPLEtBQUssTUFBTSxJQUFJLElBQUk7QUFBQSxJQUN0QyxRQUFRO0FBQUEsSUFBQztBQUVULFFBQUksQ0FBQyxRQUFRLElBQUk7QUFDZixZQUFNLE9BQU8sU0FBUyxPQUFPLFFBQVEsU0FBUztBQUM5QyxVQUFJLEVBQUUsUUFBUSxPQUFPLElBQUksRUFBRSxTQUFTLGdCQUFnQixJQUFJO0FBRXRELFlBQUksU0FBUyxxQkFBcUIsU0FBUyx5QkFBeUI7QUFDbEUsaUJBQU8sU0FBUyxRQUFRLEVBQUUsT0FBTyw4R0FBOEcsR0FBRyxHQUFHO0FBQUEsUUFDdko7QUFDQSxZQUFJLFFBQVEsV0FBVyxPQUFPLFFBQVEsV0FBVyxLQUFLO0FBQ3BELGlCQUFPLFNBQVMsUUFBUSxFQUFFLE9BQU8seUVBQXlFLEdBQUcsUUFBUSxNQUFNO0FBQUEsUUFDN0g7QUFDQSxZQUFJLFFBQVEsV0FBVyxLQUFLO0FBQzFCLGlCQUFPLFNBQVMsUUFBUSxFQUFFLE9BQU8sb0ZBQW9GLEdBQUcsR0FBRztBQUFBLFFBQzdIO0FBQ0EsZUFBTyxTQUFTLFFBQVEsRUFBRSxPQUFPLFNBQVMsT0FBTyxXQUFXLFdBQVcsdUJBQXVCLEdBQUcsUUFBUSxNQUFNO0FBQUEsTUFDakg7QUFBQSxJQUNGO0FBR0EsUUFBSTtBQUNGLFlBQU0sWUFBWSxJQUFJLElBQUkscUNBQXFDLG1CQUFtQixVQUFVLENBQUMsU0FBUztBQUN0RyxVQUFJLE9BQVEsV0FBVSxhQUFhLElBQUksVUFBVSxNQUFNO0FBQ3ZELFlBQU0sTUFBTSxVQUFVLFNBQVMsR0FBRztBQUFBLFFBQ2hDLFFBQVE7QUFBQSxRQUNSLFNBQVMsRUFBRSxlQUFlLFVBQVUsS0FBSyxHQUFHO0FBQUEsTUFDOUMsQ0FBQztBQUFBLElBQ0gsUUFBUTtBQUFBLElBQUM7QUFFVCxVQUFNLFlBQVksSUFBSSxJQUFJLHFDQUFxQyxtQkFBbUIsVUFBVSxDQUFDLEVBQUU7QUFDL0YsUUFBSSxPQUFRLFdBQVUsYUFBYSxJQUFJLFVBQVUsTUFBTTtBQUN2RCxVQUFNLGFBQWEsTUFBTSxNQUFNLFVBQVUsU0FBUyxHQUFHO0FBQUEsTUFDbkQsU0FBUyxFQUFFLGVBQWUsVUFBVSxLQUFLLEdBQUc7QUFBQSxJQUM5QyxDQUFDO0FBQ0QsUUFBSSxhQUFrQjtBQUN0QixRQUFJO0FBQ0YsWUFBTSxPQUFPLE1BQU0sV0FBVyxLQUFLO0FBQ25DLG1CQUFhLE9BQU8sS0FBSyxNQUFNLElBQUksSUFBSTtBQUFBLElBQ3pDLFFBQVE7QUFBQSxJQUFDO0FBRVQsUUFBSSxDQUFDLFdBQVcsSUFBSTtBQUNsQixhQUFPLFNBQVMsUUFBUSxFQUFFLE9BQU8sWUFBWSxPQUFPLFdBQVcsY0FBYyxnQ0FBZ0MsR0FBRyxXQUFXLE1BQU07QUFBQSxJQUNuSTtBQUVBLFVBQU0sV0FBVyxRQUFRLFlBQVksUUFBUTtBQUM3QyxVQUFNLGFBQWEsWUFBWSxnQkFBZ0IsQ0FBQztBQUVoRCxXQUFPLFNBQVMsUUFBUTtBQUFBLE1BQ3RCLFNBQVM7QUFBQSxNQUNULFFBQVE7QUFBQSxNQUNSO0FBQUEsTUFDQSxVQUFVLENBQUM7QUFBQSxNQUNYLGNBQWMsV0FDVixtQ0FDQSxTQUNFLHdHQUNBO0FBQUEsTUFDTixjQUFjO0FBQUEsSUFDaEIsQ0FBQztBQUFBLEVBQ0gsU0FBUyxHQUFRO0FBQ2YsV0FBTyxTQUFTLFFBQVEsRUFBRSxPQUFPLEdBQUcsV0FBVyxtQkFBbUIsR0FBRyxHQUFHO0FBQUEsRUFDMUU7QUFDRjs7O0FEMU1BLE9BQU8sT0FBTztBQUdkLElBQU8sc0JBQVEsYUFBYSxDQUFDLEVBQUUsS0FBSyxNQUFNO0FBQ3hDLFFBQU0sTUFBTSxRQUFRLE1BQU0sUUFBUSxJQUFJLEdBQUcsRUFBRTtBQUMzQyxRQUFNLFlBQVksSUFBSSxzQkFBc0IsSUFBSTtBQUVoRCxRQUFNLGlCQUF5QjtBQUFBLElBQzdCLE1BQU07QUFBQSxJQUNOLGdCQUFnQixRQUFRO0FBQ3RCLGFBQU8sWUFBWSxJQUFJLHVCQUF1QixPQUFPLEtBQUssUUFBUTtBQUNoRSxZQUFJO0FBQ0YsZ0JBQU0sU0FBdUIsQ0FBQztBQUM5QixnQkFBTSxJQUFJLFFBQWMsQ0FBQyxZQUFZO0FBQ25DLGdCQUFJLEdBQUcsUUFBUSxDQUFDLE1BQWtCLE9BQU8sS0FBSyxDQUFDLENBQUM7QUFDaEQsZ0JBQUksR0FBRyxPQUFPLE1BQU0sUUFBUSxDQUFDO0FBQUEsVUFDL0IsQ0FBQztBQUNELGdCQUFNLE9BQU8sT0FBTyxPQUFPLE1BQU07QUFDakMsZ0JBQU0sU0FBUyxvQkFBb0IsT0FBTyxPQUFPLE9BQU8sUUFBUSxJQUFJO0FBQ3BFLGdCQUFNLE1BQU0sVUFBVSxJQUFJLE9BQU87QUFDakMsZ0JBQU0sVUFBVSxJQUFJLFVBQVUsT0FBTyxZQUFZO0FBQ2pELGdCQUFNLFVBQVUsSUFBSSxRQUFRLEtBQUs7QUFBQSxZQUMvQjtBQUFBLFlBQ0EsU0FBUyxJQUFJO0FBQUEsWUFDYixNQUFNLFdBQVcsU0FBUyxXQUFXLFNBQVMsU0FBWTtBQUFBLFVBQzVELENBQUM7QUFDRCxnQkFBTSxXQUFxQixNQUFNLFFBQXFCLE9BQU87QUFDN0QsY0FBSSxhQUFhLFNBQVM7QUFDMUIsbUJBQVMsUUFBUSxRQUFRLENBQUMsR0FBRyxNQUFNLElBQUksVUFBVSxHQUFHLENBQUMsQ0FBQztBQUN0RCxnQkFBTSxLQUFLLE1BQU0sU0FBUyxZQUFZO0FBQ3RDLGNBQUksSUFBSSxPQUFPLEtBQUssRUFBRSxDQUFDO0FBQUEsUUFDekIsU0FBUyxHQUFRO0FBQ2YsY0FBSSxhQUFhO0FBQ2pCLGNBQUksVUFBVSxnQkFBZ0Isa0JBQWtCO0FBQ2hELGNBQUksSUFBSSxLQUFLLFVBQVUsRUFBRSxPQUFPLEdBQUcsV0FBVyxpQkFBaUIsQ0FBQyxDQUFDO0FBQUEsUUFDbkU7QUFBQSxNQUNGLENBQUM7QUFBQSxJQUNIO0FBQUEsRUFDRjtBQUVBLFNBQU87QUFBQTtBQUFBO0FBQUEsSUFHTCxTQUFTLENBQUMsTUFBTSxHQUFHLGNBQWMsRUFBRSxPQUFPLE9BQU87QUFBQSxJQUNqRCxjQUFjO0FBQUEsTUFDWixTQUFTLENBQUMsY0FBYztBQUFBLElBQzFCO0FBQUEsSUFDQSxRQUFRO0FBQUE7QUFBQSxNQUVOLE9BQU8sWUFDSDtBQUFBLFFBQ0UsUUFBUTtBQUFBLFVBQ04sUUFBUTtBQUFBLFVBQ1IsY0FBYztBQUFBLFVBQ2QsUUFBUTtBQUFBLFFBQ1Y7QUFBQSxNQUNGLElBQ0E7QUFBQSxJQUNOO0FBQUEsRUFDRjtBQUNGLENBQUM7IiwKICAibmFtZXMiOiBbInByb2plY3RJZCIsICJ0b2tlbiIsICJ0ZWFtSWQiLCAiZG9tYWluIl0KfQo=
